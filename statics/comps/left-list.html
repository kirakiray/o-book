<template component>
  <l-m src="@pui/list/list.html"></l-m>
  <style>
    p-list-item::part(container) {
      padding-top: 0;
      padding-bottom: 0;
    }

    p-list-item {
      font-size: 16px;
      margin: 2px 0;
    }

    p-list-item p-list {
      margin-left: 12px;
    }
  </style>
  <p-list>
    <x-fill :value="articlesList" name="item"></x-fill>
  </p-list>
  <template name="item">
    <p-list-item
      attr:button="$data.childs ? 'suffix' : ''"
      radius
      collapse-childs="open"
    >
      <x-if :value="$data.childs">
        {{$data.name}}
        <i collapse-triangle slot="suffix"></i>
        <p-list slot="childs">
          <x-fill :value="$data.childs" name="item"> </x-fill>
        </p-list>
      </x-if>
      <x-else> <a attr:href="$data.path">{{$data.name}}</a> </x-else>
    </p-list-item>
  </template>

  <script>
    export default async ({ load }) => {
      const { navs, articlesList } = await load("../data.js");

      return {
        tag: "left-list",
        data: {
          articlesList: {},
        },
        attached() {
          this.articlesList = articlesList;
        },
        detached() {
          this.articlesList = {};
        },
      };
    };
  </script>
</template>
